% !TEX root = thesis.tex
\chapter{Performance Profiling Techniques}
\label{ch:profiling}

In this chapter, we present two run-time analyses for collecting fine-grained profiling information based on efficient and elegant algorithmic techniques. The first analysis is {\em interprocedural} and focuses on identifying the calling contexts of function invocations that are most frequently encountered during the execution of a program. The second analysis works at {\em intraprocedural} level and identifies cyclic paths that are taken in the control-flow graph of a procedure, thus spanning multiple loop iterations. Both techniques can provide valuable information for program understanding and performance analysis, as they can be used to direct optimizations to portions of the code where most resources are consumed.

\ifdefined\noauthorea
\input{hcct}
\newpage
\input{kblpp}
\fi

\section{Conclusions}
Low-overhead profiling mechanisms are a key ingredient for effective adaptive optimization in a runtime system. For some classes of profiling information, the sheer size of the domain might require an analysis routine to maintain a large amount of data in main memory, resulting in a performance penalty from poor access locality or even the exhaustion of available resources. This is the case of context-sensitive profiling, for which we have introduced a new data structure, the HCCT, that can be constructed online in small space with strong guarantees in terms of accuracy and recall. We present and evaluate an implementation of a HCCT profiler in \mysection\ref{ss:hcct-eval}.

Another example is cyclic-path profiling, for which extant techniques fail to scale as enumerating paths explicitly results into an explosion in the number of possible sequences already for a few loop iterations. We have presented an encoding scheme based on a prefix forest, the \kipf, obtainable on demand from an intermediate data structure, the \ksf, that can be constructed online efficiently. We describe and evaluate an implementation of this technique in Jikes RVM in \mysection\ref{ss:kblpp-eval}.